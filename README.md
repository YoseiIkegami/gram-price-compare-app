# グラム単価比較アプリ

スーパーやコンビニで一瞬でどれが一番お得か分かる、超軽量グラム単価比較アプリです。

## 概要

複数の商品の価格と内容量を入力するだけで、自動的にグラム単価を計算し、最安商品を視覚的に強調表示します。片手操作に最適化されたシンプルなUIで、売り場での迅速な判断をサポートします。

**特徴**:
- ⚡ **超軽量・高速** - 起動が速く、オフライン完全対応
- 📊 **自動計算** - 価格と内容量を入力するだけでグラム単価を自動計算
- 👑 **最安表示** - 最安商品を色とアイコンで視覚的に強調
- 📱 **片手操作** - モバイル画面に最適化されたコンパクトなUI

## 使い方

### 基本的な流れ

1. **商品を入力** - 商品の価格と内容量を入力します
2. **自動計算** - グラム単価が自動的に計算されます
3. **最安を確認** - 最安商品が👑で強調表示されます

### 機能詳細

**商品の追加・削除**:
- 最初はA・Bの2商品が表示されます
- 「追加」ボタンで最大4商品まで比較できます
- 各商品の右上のゴミ箱アイコンで削除できます

**商品名の編集**:
- 商品名の横のペンアイコンをタップして編集できます
- 商品の識別に便利です（例：「牛乳A」「牛乳B」）

**計算結果の確認**:
- 各商品のグラム単価が自動計算されます
- 最安商品は緑色で強調表示され、👑アイコンが表示されます

## 技術スタック

- **フレームワーク**: React Native + Expo
- **言語**: TypeScript
- **スタイリング**: TailwindCSS (NativeWind)
- **状態管理**: React Hooks (useState)
- **テスト**: Vitest
- **アイコン**: Material Icons + Expo Symbols

## プロジェクト構成

```
gram-price-compare-app/
├── app/
│   ├── (tabs)/
│   │   ├── index.tsx           # 計算画面（メイン）
│   │   ├── about.tsx           # About画面
│   │   └── _layout.tsx         # タブナビゲーション
│   └── _layout.tsx             # ルートレイアウト
├── components/
│   ├── screen-container.tsx    # SafeArea対応コンテナ
│   ├── product-card.tsx        # 商品カード
│   ├── haptic-tab.tsx          # ハプティクスタブ
│   └── ui/
│       └── icon-symbol.tsx     # アイコンマッピング
├── lib/
│   ├── calculator.ts           # 計算ロジック
│   ├── calculator.test.ts      # ユニットテスト
│   ├── haptics.ts              # ハプティクスフィードバック
│   ├── utils.ts                # ユーティリティ関数
│   └── theme-provider.tsx      # テーマプロバイダー
├── hooks/
│   ├── use-colors.ts           # テーマカラーフック
│   ├── use-color-scheme.ts     # ダークモード検出
│   └── use-color-scheme.web.ts # Web用ダークモード検出
├── constants/
│   ├── const.ts                # 定数定義
│   └── theme.ts                # テーマ定義
├── assets/images/              # アプリアイコン・スプラッシュ
├── app.config.ts               # Expo設定
├── tailwind.config.js          # Tailwind設定
├── theme.config.js             # カラートークン定義
└── package.json                # 依存関係
```

## 開発方法

### セットアップ

```bash
# 依存関係のインストール
pnpm install

# 開発サーバーの起動
pnpm dev

# テストの実行
pnpm test

# コードのリント
pnpm lint

# コードのフォーマット
pnpm format
```

### ブラウザでプレビュー

開発サーバー起動後、ターミナルに表示されるURLにアクセスするか、自動的に開かれるブラウザでアプリを確認できます。

```bash
# 開発サーバー起動後、以下のようなURLが表示されます:
# Web: http://localhost:8081
```

ブラウザで直接アクセスする場合は、ターミナルで`w`キーを押すか、表示されたURLをクリックしてください。

### モバイルデバイスでテスト

1. デバイスに Expo Go アプリをインストール
2. 開発サーバーのQRコードをスキャン
3. Expo Go でアプリが起動します

### ビルド

```bash
# TypeScript型チェック
pnpm check

# ビルド（本番用）
pnpm build
```

## 主要な計算ロジック

### グラム単価の計算

```typescript
pricePerGram = price / weight
```

例）
- 商品A: 100円 / 500g = 0.20円/g
- 商品B: 150円 / 1000g = 0.15円/g
- **最安**: 商品B（0.15円/g）

## テスト

ユニットテストは `lib/calculator.test.ts` に記載されています。

```bash
# テスト実行
pnpm test

# テストカバレッジ確認
pnpm test --coverage
```

**テスト項目**（15テスト）:
- グラム単価の計算
- 複数商品の比較
- エッジケース（0値、小数点）
- 商品IDの生成

## パフォーマンス

- **起動時間**: < 2秒（オフライン）
- **計算速度**: リアルタイム（入力時に即座に計算）
- **メモリ使用量**: < 30MB
- **バンドルサイズ**: < 5MB

## ブラウザ・デバイス対応

| プラットフォーム | 対応状況 |
|---|---|
| iOS 13+ | ✅ 対応 |
| Android 6+ | ✅ 対応 |
| Web（Chrome/Safari） | ✅ 対応 |

## ダークモード

アプリはシステムのダークモード設定に自動で対応します。ユーザーは手動でテーマを切り替えることもできます。

## データ保存

すべてのデータはデバイスのローカルストレージ（AsyncStorage）に保存されます。クラウド同期やサーバー連携はありません。

## プライバシー

このアプリはインターネット接続を必要としません。すべての計算と保存がローカルで完結するため、個人情報が外部に送信されることはありません。

## ライセンス

MIT License

## サポート

バグ報告や機能リクエストは、GitHub Issues で受け付けています。

## 寄付

このアプリが役に立つ場合は、以下のリンクからサポーターになることができます:

[☕ Buy Me a Coffee](https://buymeacoffee.com/yoseiikegami)

---

**Made by YoseiIkegami**
